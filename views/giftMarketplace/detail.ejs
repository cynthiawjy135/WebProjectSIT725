<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><%= gift.name %></title>
  <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
  <%- include('../components/header', { title: gift.name, user }) %>

  <div class="page-container">
    <main class="gift-detail-container">
      <h1 class="gift-name"><%= gift.name %></h1>

      <% if (gift.imageUrl) { %>
        <img src="<%= gift.imageUrl %>" alt="<%= gift.name %>" class="gift-image">
      <% } else { %>
        <img src="/images/default.jpg" alt="No image available" class="gift-image">
      <% } %>

      <div class="gift-info">
        <p class="gift-description"><%= gift.description %></p>
        <p class="gift-price"><strong>Price:</strong> $<%= gift.price.toFixed(2) %></p>

        <p class="gift-availability">
          <strong>Availability:</strong>
          <% if (Number(gift.Availability) > 0) { %>
            <span class="available"><%= gift.Availability %> in stock</span>
          <% } else { %>
            <span class="unavailable">Out of Stock</span>
          <% } %>
        </p>

        <p class="gift-seller"><strong>Seller:</strong> <%= gift.sellerName || "Unknown" %></p>

        <div class="gift-actions">
          <form action="/cart/add/<%= gift._id %>" method="POST">
            <button type="submit" class="add-to-cart-btn" <% if (gift.Availability <= 0) { %> disabled <% } %>>
              Add to Cart
            </button>
          </form>
          <a href="/chat/<%= gift.sellerId %>" class="chat-seller-btn">Chat with Seller</a>
        </div>

        <a href="/gifts" class="back-link">‚Üê Back to list</a>
      </div>
    </main>
    <%- include('../components/footer') %>
  </div>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    .page-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    main {
      flex: 1;
    }

    .gift-detail-container {
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      background-color: #3C4A59;
      border-radius: 10px;
      color: white;
      text-align: center;
    }

    .gift-name {
      font-size: 32px;
      margin-bottom: 20px;
    }

    .gift-image {
      width: 100%;
      height: 300px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    .gift-description {
      font-size: 16px;
      margin-bottom: 10px;
    }

    .gift-price {
      font-size: 20px;
      color: #FFD700;
      margin-bottom: 10px;
    }

    .gift-availability .available {
      color: #90ee90;
    }

    .gift-availability .unavailable {
      color: #ff7f7f;
    }

    .gift-seller {
      margin-bottom: 15px;
      font-style: italic;
    }

    .gift-actions {
      margin-top: 20px;
    }

    .add-to-cart-btn,
    .chat-seller-btn {
      background-color: #559A6A;
      padding: 10px 20px;
      color: white;
      text-decoration: none;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      margin: 5px;
      cursor: pointer;
    }

    .add-to-cart-btn:disabled {
      background-color: #777;
      cursor: not-allowed;
    }

    .back-link {
      display: block;
      margin-top: 20px;
      color: #ccc;
      text-decoration: none;
    }

    footer {
      background-color: #333;
      color: white;
      text-align: center;
      padding: 10px;
    }
  </style>
</body>
</html>
